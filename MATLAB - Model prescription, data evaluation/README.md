# MATLAB Project for Double Inverted Pendulum on Cart (DIPC)

This folder contains MATLAB files for modeling and analyzing the double inverted pendulum on a cart system (DIPC). These scripts and functions are primarily used for:

- Writing mechanical models for the DIPC.
- Evaluating, analyzing, and visualizing measurement data.
- Generating illustrative diagrams and detailed analysis of simulation results.

## Project Structure

### Folders and Their Purposes

#### 1. `Evaluation`
This folder is dedicated to data evaluation and processing.

- **`1.ReadData`**
  Contains scripts for importing and reading measurement data:
  - `parseCSV.m`: Parses CSV data for further analysis.
  - `get_filepaths.m`: Reads the available csv files in the current directory
  - `get_u.m`: Extracts control input values.
  - `get_du.m`: Extracts control speed values.
  - `get_ddu.m`: Extracts control acceleration values.
  - `get_phi1_err.m`: Extracts errors for the first pendulum.
  - `get_dphi1.m`: Extracts angular speeds for the first pendulum.

- **`2.ConvertData`**
  Scripts for data conversion and preprocessing:
  - `filter_and_adjust_timestamps.m`: Adjusts timestamps and filters raw data.
  - `normalize_and_filter_data.m`: Normalizes and filters measurement data.
  - `process_bulk_data_matrix.m`: Processes bulk data into a structured matrix.

- **`3.Plotting`**
  Visualization utilities:
  - `s_plot.m`: Plots datasets with optional y-axis limits.

- **`4.Analysis`**
  Scripts for analyzing the data and extracting statistical information.
  - `analyze_datafield_linvel.m`: Analyzes linear velocity fields.
  - `analyze_datafield_angle.m`: Performs angle-based data analysis.
  - `calculateStatisticsTableLinvel.m`: Computes statistical tables for linear velocity-related data.
  - `calculateStatisticsTableAngle.m`: Computes statistical tables for angle-related data.
  - `plotFrequencySpectrum.m`: Plots frequency spectra for multiple runs with optional axis limits.

#### 2. `Illustrations`
This folder contains a figure of the model:

- `double_pendulum_simp.png`: Simplified figure of the double inverted pendulum.

#### 3. `ModelEquations`
Contains scripts for the mathematical representation of the system:

- `DIPC_System.mlx`: A MATLAB Live Script for deriving the system dynamics equations.
- `DIPC_Control.mlx`: A MATLAB Live Script for formulating and analyzing the control equations for the double pendulum system.
- `linearizeMatrix.m`: Linearizes a matrix function around a given point using Taylor expansion.
- `display_in_row.m`: Displays equations row-wise for better readability.
- `displayLatex.m`: Renders LaTeX expressions in a MATLAB Live Script block.

## Key Features

### Data Reading and Preprocessing
- Import and clean raw measurement data for analysis.
- Normalize and filter datasets for uniformity.

### Data Conversion and Visualization
- Convert data into formats suitable for MATLAB processing.
- Create detailed plots of measurement results and analyze spectral properties.

### Analytical Tools
- Analyze user input based on cursor displacement and velocity, and evaluate system response, including pendulum angular error, and angular velocity.
- Generate statistical summaries of datasets.

### Model Representation
- Derive the DIPC system equations.
- Visualize mathematical expressions with LaTeX rendering.

## How to Use

1. **Set up MATLAB:**
   Ensure MATLAB is installed and add the repository's root folder to the MATLAB path.

2. **Run Scripts:**
   Start with the `DIPC_System.mlx` script in the `ModelEquations` folder for saving system variables to `DIPC_SysVars.mat` file.

3. **Assigning the recordings:**
   The records (the .csv files generated by the python program during the measurements) that you want to evaluate should be placed in the `records_for_readback` folder.

4. **Evaluate Results:**
   Run the `BulkDataReadback.mlx` script in the `Evaluation` folder for data processing and analysis.

## Dependencies

Ensure the following MATLAB toolboxes are installed:
- Signal Processing Toolbox (for spectral analysis).
- Control System Toolbox (for system modeling).
